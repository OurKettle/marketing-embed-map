{"version":3,"file":"index.js","sources":["../src/components/Layer.tsx","../src/components/Map.tsx","../src/index.tsx"],"sourcesContent":["import * as React from \"react\";\n\nconst { useEffect, useState } = React;\n\nconst SpreadLayer: React.FC<{\n  show: boolean;\n  layerName: string;\n  map: any;\n}> = ({ show, layerName, map }) => {\n  const [mapLoaded, setMapLoaded] = useState<boolean>(false);\n\n  function showLayer() {\n    const layer = map.style.getLayer(layerName);\n    if (layer) {\n      map.setLayoutProperty(layerName, \"visibility\", \"visible\");\n    }\n  }\n  function hideLayer() {\n    const layer = map.style.getLayer(layerName);\n    if (layer) {\n      map.setLayoutProperty(layerName, \"visibility\", \"none\");\n    }\n  }\n\n  useEffect(() => {\n    if (show && mapLoaded) showLayer();\n    if (!show && mapLoaded) hideLayer();\n  }, [show]);\n\n  useEffect(() => {\n    if (map) {\n      map.on(\"load\", () => {\n        setMapLoaded(true);\n        if (show) showLayer();\n        if (!show) hideLayer();\n      });\n    }\n  }, [map]);\n  return null;\n};\n\nexport default SpreadLayer;\n","import * as React from \"react\";\n\nimport Mapboxgl from \"mapbox-gl\";\nimport Layer from \"./Layer\";\nimport { MapSettings } from \"../types\";\n\nMapboxgl.accessToken =\n  \"pk.eyJ1Ijoia2V0dGxla2V0dGxlIiwiYSI6ImNrbGxkZDR2ZDEwMDgycGx5cm83ejl5NWQifQ.Jc5tHw94MokeSr2jFqT4ow\";\n\nconst { useEffect, useRef } = React;\n\nconst Map: React.FC<{\n  showSpreadLayer: boolean;\n  showFireShapeLayer: boolean;\n  className: string;\n  settings: MapSettings;\n}> = ({ showSpreadLayer, showFireShapeLayer, className, settings }) => {\n  const [baseMap, setBaseMap] = React.useState<any>(null);\n  const baseMapEl = useRef() as React.MutableRefObject<HTMLDivElement>;\n\n  const initializeMap = () => {\n    if (baseMapEl) {\n      const map = new Mapboxgl.Map({\n        container: baseMapEl.current,\n        style: \"mapbox://styles/kettlekettle/ckk79y38t06x617pg5v5z87rq\",\n        center: [settings.lon!, settings.lat!],\n        zoom: settings.zoom,\n        pitch: settings.pitch,\n      });\n\n      setBaseMap(map);\n    }\n  };\n\n  useEffect(() => {\n    if (baseMap) {\n      baseMap.scrollZoom.setZoomRate(1 / 600); // PERFORMANCE: slow down zoom rate\n      baseMap.addControl(new Mapboxgl.NavigationControl(), \"top-right\");\n    }\n  }, [baseMap]);\n\n  useEffect(() => {\n    if (baseMapEl) {\n      initializeMap();\n    }\n  }, [baseMapEl]);\n\n  return (\n    <>\n      {baseMap && (\n        <>\n          <Layer\n            map={baseMap}\n            layerName=\"spreadfeb21310\"\n            show={showSpreadLayer}\n          />\n          <Layer map={baseMap} layerName=\"wf2020\" show={showFireShapeLayer} />\n        </>\n      )}\n\n      <div ref={baseMapEl} className={className} />\n    </>\n  );\n};\n\nexport default Map;\n","import * as React from \"react\";\nimport Map from \"./components/Map\";\nimport { MapProps } from \"./types\";\n\nconst App: React.FC<MapProps> = ({\n  showSpreadLayer = true,\n  showFireShapeLayer = true,\n  className = \"\",\n  settings = {\n    zoom: 5,\n    lat: 37.942291,\n    lon: -120.499532,\n    pitch: 0,\n  },\n}) => {\n  return (\n    <Map\n      className={className}\n      showSpreadLayer={showSpreadLayer}\n      showFireShapeLayer={showFireShapeLayer}\n      settings={settings}\n    />\n  );\n};\n\nexport default App;\n"],"names":["React.useEffect","React.useState","Mapboxgl","useEffect","React.useRef","React.createElement","Layer"],"mappings":"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"}